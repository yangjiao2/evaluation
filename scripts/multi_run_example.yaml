metadata:
  name: avc-mixtral-sample
  namespace: nemo-evaluation
  labels:
    example: 'true'
spec:
  workflowMetadata:
    labels:
      example: 'true'
  schedule: '0 */12 * * *'
  workflowSpec:
    entrypoint: argosay
    arguments:
      parameters:
        - name: base_url
          value: http://nvbot-evaluation-service-dev.ns-nvbot-evaluation-dev.svc.cluster.local:5000/evaluation
    templates:
      - name: argosay
        inputs:
          parameters:
            - name: base_url
              value: '{{workflow.parameters.base_url}}'
        outputs: {}
        metadata: {}
        container:
          name: main
          image: curlimages/curl
          command:
            - /bin/sh
            - -c
          args:
          - |
            curl -X POST -H 'accept: application/json' -H 'Content-Type: application/json' -d '{
              "Project": "avc_mixtral_sample_custom_evaluation",
              "RunType": "cron",
              "System": "avc",
              "Model": "mixtral",
              "Attachments": [],
              "UserId": "nvbot_evaluation",
              "Env": "dev"
            }' http://nvbot-evaluation-service-dev.ns-nvbot-evaluation-dev.svc.cluster.local:5000/evaluation/regression_run;
            curl -X POST -H 'accept: application/json' -H 'Content-Type: application/json' -d '{
              "Project": "avc_mixtral_sample_custom_evaluation",
              "RunType": "cron",
              "System": "avc",
              "Model": "mixtral",
              "Attachments": [],
              "UserId": "nvbot_evaluation",
              "Env": "stg"
            }' http://nvbot-evaluation-service-dev.ns-nvbot-evaluation-dev.svc.cluster.local:5000/evaluation/regression_run;
            curl -X POST -H 'accept: application/json' -H 'Content-Type: application/json' -d '{
              "Project": "avc_mixtral_sample_custom_evaluation",
              "RunType": "cron",
              "System": "avc",
              "Model": "mixtral",
              "Attachments": [],
              "UserId": "nvbot_evaluation",
              "Env": "prd"
            }' http://nvbot-evaluation-service-dev.ns-nvbot-evaluation-dev.svc.cluster.local:5000/evaluation/regression_run
          resources: {}
    ttlStrategy:
      secondsAfterCompletion: 300
    podGC:
      strategy: OnPodCompletion
